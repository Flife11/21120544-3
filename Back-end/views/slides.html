<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/6879b33e1d.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Document</title>
</head>
<body>
    <div id="carouselExampleIndicators" class="carousel slide">
        <div class="d-flex justify-content-between">
            <div class="slide-title" >21544{title}</div>
            <div class="carousel-indicators">
                21544{for i in Movies}
                    21544{if index}
                        <button type="button" data-bs-target="#carouselExampleIndicators" :data-bs-slide-to="i" class="boxOffice-slide-Indicators active" ></button>
                    {else}
                        <button type="button" data-bs-target="#carouselExampleIndicators" :data-bs-slide-to="i" class="boxOffice-slide-Indicators"></button>    
                    {/if}
                {/for}                
            </div>
        </div>

        <div class="carousel-inner d-flex justify-content-between">
            <button class="carousel-control-prev slide-button" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <div class="slide-item d-flex mx-auto d-block" class="boxOffice-slide-Item" :id="data.page">
                21544{for d in boxOffice}
                <a href="#" class="position-relative parent-image-slide">
                    <img src=21544{d.image} class="slide-image" alt=21544{d.id}>
                    <div class="movie-title position-absolute translate-middle">21544{d.fullTitle}</div>
                </a>        
                {/for}        
            </div>  
            <button class="carousel-control-next slide-button" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>                   
        </div>
    </div>

    <script>
        const getData = async() => {
            
        }

        const handleCLick = function(e){
            $(`.boxOffice-slide-Indicators`).removeClass('active');
            $(e.target).addClass("active");
            var slide = $(e.target).attr('data-bs-slide-to');
            // console.log(slide);
            this.getData(slide);
        }
        $('.boxOffice-slide-Indicators').on('click', handleCLick);

        const handleCLickPrev = function(){
            var curPage = $(`.boxOffice-slide-Item`).attr('id');
            var prevPage = (curPage-2+5)%5 + 1;
            this.getData(prevPage);

            $(`.boxOffice-slide-Indicators`).removeClass('active');
            $(`.boxOffice-slide-Indicators`).get().forEach((element, index) => {
                if (index+1==prevPage) $(element).addClass('active');
            });
        }
        $('.carousel-control-prev').on('click', handleCLickPrev);
        const handleCLickNext= function(){
            var curPage = $(`.boxOffice-slide-Item`).attr('id');
            var nextPage = (parseInt(curPage)+5)%5 + 1;
            this.getData(nextPage);

            $(`.boxOffice-slide-Indicators`).removeClass('active');
            $(`.boxOffice-slide-Indicators`).get().forEach((element, index) => {
                if (index+1==nextPage) $(element).addClass('active');
            });
        }   
        $('.carousel-control-next').on('click', handleCLickNext);
        const detail = function(item) {
            // this.$emit('detailMovie', item.id);
        }
        $('.slide-image').on('click', detail);
    </script>
</body>
</html>